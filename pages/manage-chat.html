---
title: Manage Chats
---
<!DOCTYPE html>
<html ng-app="iService">
<head>
  {% include common-head.html %}
	<link href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.16/css/dataTables.bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.dataTables.min.css" rel="stylesheet" />
	<link href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" rel="stylesheet" />
</head>
<body class="hold-transition skin-blue sidebar-mini">
  <div class="wrapper">
		{% include common-header.html %}
		{% include common-menu.html %}
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<h1>
						{{ page.title }}
						<i class="fa fa-question-circle text-info help-icon" popover-placement="auto bottom-left" uib-popover-template="'manageChatPopover.html'" type="button"  popover-trigger="outsideClick"></i>
				</h1>
				<ol class="breadcrumb">
					<li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
					<li class="active">Manage Work Queues</li>
					<li class="active"> {{ page.title }}</li>
				</ol>
			</section>
			<!-- Main content -->
			<section class="content" ng-controller="myCtrl">
				<div class="row"> 
					<div class="col-md-4"  ng-class="{'treeview-collapse': !menuCollapse, 'treeview-expand': menuCollapse}" ng-init="menuCollapse = true;">
						<!-- Profile Image -->
						<div class="box box-primary">
							<div class="box-header with-border heading-with-toggle" >
								<i class="fa fa-list-ul"></i>
								<h3 class="box-title text-right">Topic List</h3>
                                
								<span aria-hidden="true" class="pull-right  mleft-15 menu-collapse" ng-click="menuCollapse = !menuCollapse;" ng-init="menuCollapse = true;"><i class="fa fa-reorder treeview-collapse-icon"></i></span>
								<span ng-click="treeView()" aria-hidden="true" class="menu-collapse glyphicon  pull-right glyphicon-chevron-right mleft-15 treeview-expand-icon" ng-class="{'glyphicon-chevron-right__expanded': !isCollapsedTreeView}" ng-init="isCollapsedTreeView = false;"></span>
								<span class="pull-right my-topic-switch" uib-collapse="isCollapsedTreeView">
								  <iservice-switch switched="toggle.switchshowtopics">Show My Topics</iservice-switch>
								</span>
							</div>
							<div class="box-body search-criteria topic-list-container">
								<div ng-hide="loader" ng-cloak  ng-init="loader = true;">
									<div class="row">
										<div class="col-md-12 message-head">
											<label class="pull-left select-all-topic"><input type="checkbox" class="minimal">Select All</label> 
											<div class="pull-right count-block">
												<span class="fa-stack stack-icon-label" data-toggle="tooltip" data-placement="bottom" data-original-title="Active chats">
													<i class="fa fa-comment"></i>
													<i class="fa fa-arrow-circle-o-right text-green"></i> 
												</span>
											</div>
											<div class="pull-right count-block">
												<span class="fa-stack stack-icon-label" data-toggle="tooltip" data-placement="bottom" data-original-title="Waiting chats">
													<i class="fa fa-comment"></i>
													<i class="fa fa-clock-o"></i> 
												</span>
											</div>
											<div class="pull-right count-block"  data-toggle="tooltip" data-placement="bottom" data-original-title="Agents skilled for this topic">
												<i class="fa fa-user"></i>
											</div>
										
										</div> 
									</div>	
								
									<div ng-hide="toggle.switchshowtopics"  class="treeview topic-list  active-chat">
										<div class="treeview-segment-name">   
										  E-shop
										</div>		
										<ul id="tree1" class="topictree">
											<li>
												
												<input type="checkbox" class="minimal">
												<div class="treeviewitem">
													<div class="treeviewrow">
														<div class="div1"> All Topic</div> 
													</div>	
												</div>
												<div class="count-columns">
													<div class="pull-right count-block">10</div>
													<div class="pull-right count-block"  uib-tooltip="1043" tooltip-placement="bottom">2</div>
													<div class="pull-right count-block text-aqua">3</div>
												
												</div>
												
												<ul>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1 text-red">  _Feedback</div> <div class="div2">&nbsp;</div></div></div> <div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
													<li> <input type="checkbox" class="minimal" checked><div class="treeviewitem"><div class="treeviewrow"><div class="div1 text-red">_Newsletter Subscription</div></div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1 text-red">_Spam</div><div class="div2">&nbsp;</div> </div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
													<li> <input type="checkbox" class="minimal" ><div class="treeviewitem"> <div class="treeviewrow"><div class="div1 text-red">_Undeliverable</div> </div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Account Questions</div></div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div>
														<ul>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Orders </div> </div> </div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Refunds </div></div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Returns </div> </div> </div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
														</ul>
													</li>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Products</div><div class="div2">&nbsp;</div> </div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div>
														<ul>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Audio-Video</div></div> </div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Cameras </div> </div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Cell Phones</div></div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Computers</div> </div> </div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
															<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Televisions</div> </div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
														</ul>
													</li>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Shipping</div></div></div> <div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
													<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Technical Support</div></div></div><div class="count-columns"><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
												
												</ul>
											</li>
										</ul>
                                        
									</div>
									<div ng-show="toggle.switchshowtopics" class="treeview  topic-list  active-chat">
										<div class="treeview-segment-name">   
											Financial Services
										 </div>
										<ul id="tree2" class="topictree">
											<li>
												<input type="checkbox" class="minimal ">
												<div class="treeviewitem"><div class="treeviewrow"><div class="div1"> All Topic</div> </div></div><div class="count-columns"><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div>
												<ul>
														<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1 text-red">  _Feedback</div> <div class="div2">&nbsp;</div></div></div><div class="count-columns"></div><div class="pull-right count-block">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></li>
														<li> <input type="checkbox" class="minimal" checked>
															<div class="treeviewitem">
																<div class="treeviewrow">
																	<div class="div1 text-red">_Newsletter Subscription</div>
																</div>
															</div>
															<div class="count-columns">
																
																<div class="pull-right count-block">--</div>
																<div class="pull-right count-block text-red">--</div>
																<div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div>
														    </div>	
														</li>
														<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1 text-red">_Spam</div><div class="div2">&nbsp;</div> </div></div><div class="count-columns"><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
														<li> <input type="checkbox" class="minimal" ><div class="treeviewitem"> <div class="treeviewrow"><div class="div1 text-red">_Undeliverable</div> </div></div><div class="count-columns"><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-red">--</div><div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div></div></li>
														<li> <input type="checkbox" class="minimal"><div class="treeviewitem"><div class="treeviewrow"><div class="div1">Account Questions</div></div></div>
															<div class="count-columns">
															
																<div class="pull-right count-block">--</div>
																<div class="pull-right count-block text-red">--</div>
																<div class="pull-right count-block text-aqua" uib-tooltip="Alek Packard" tooltip-placement="bottom">1</div>
															</div>
														</li>
												</ul>
											</li>
											
										</ul>
									</div>
								</div>
								<!--Loader Place holder-->
								<div class="box-placeholder" ng-show="loader">
									<div class="p-4 mbottom-15">
									  <span class="category text link"></span>
									  <h4 class="text line"></h4>
									  <h4 class="text"></h4>
									</div>
									<div class="excerpt p-4 mbottom-15">
									  <div class="text line"></div>
									  <div class="text line"></div>
									  <div class="text"></div>
									</div>
									<div class="excerpt p-4 mbottom-15">
										<div class="text title line"></div>
										<div class="text title line"></div>
										<div class="text"></div>
									</div>
									<div class="excerpt p-4 mbottom-15">
										<div class="text line"></div>
										<div class="text line"></div>
										<div class="text title"></div>
									</div>
									<p class="loading-text">
										Gathering Topics..
									</p>	
								</div>
								  
							</div>
					<!-- /.box-body -->
						</div>
					<!-- /.box -->
					</div>
					<div class="p-l-0 col-md-8"  ng-class="{'col-md-8': menuCollapse, 'treeview-expand col-md-11': !menuCollapse}">
						<div class="row" >
							<div class="col-md-12">
								<div class="box box-info">
									<div class="box-header with-border">
										<i class="fa fa-comments"></i>
										<h3 class="box-title head-title-padding">Chat List</h3>
									
										<div class="pull-right">
											<button class="btn btn-sm btn-danger ng-scope margin-r-5" ng-class="small? 'btn-block': 'hidden-xs hidden-sm'" ng-click="endChat(chat)" ng-disabled="chat.chatEndRunning()">
												<i class="fa fa-fw fa-close" ng-hide="chat.chatEndRunning()"></i>
												<i class="fa fa-spinner fa-spin fa-fw ng-hide"></i>
												End
											</button>
											<div class="btn-group dropdown margin-r-5" uib-dropdown="" is-open="status.isopen">
												<button id="single-button" type="button" class="btn btn-sm btn-primary dropdown-toggle" uib-dropdown-toggle="" ng-disabled="disabled" aria-haspopup="true" aria-expanded="false">
													<i class="fa fa-fw fa-mail-forward"></i>
													Forward <span class="caret"></span>
												</button>
												<ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="single-button">
													<li role="menuitem"><a href="#">Remove From My Queue</a></li>
													<li role="menuitem"><a href="#">Assign To Agent…</a>
														<div class="bg-info text-muted text-center">
														<i>No agents available</i>
														</div>
													</li>
												</ul>
											</div>
											<div class="btn-group" uib-dropdown dropdown-append-to-body auto-close="outsideClick">
												<button class="btn btn-sm btn-primary" title="Spam"  uib-dropdown-toggle>
													<i class="fa  fa-arrows-alt"></i>
													Change Topic
												</button>
												<ul class="dropdown-menu dropdown-menu-btn-option dropdown-menu-right "  uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
													<li>
															<input type="text" class="form-control mbottom-15">
															<select class="changetopicselect form-control" multiple>
																<option class="op-level-0">e-shop -- All Topics</option>
																<option class="op-level-1">_Feedback</option>
																<option class="op-level-1">_Newsletter Subscription </option>
																<option class="op-level-1">_Spam </option>
																<option class="op-level-1">_Undeliverable </option>
																<option class="op-level-1">Account Questions </option>
																<option class="op-level-2">Orders </option>
																<option class="op-level-2">Refunds </option>
																<option class="op-level-2">Returns </option>
																<option class="op-level-2">Products</option>
																<option class="op-level-2">Audio-Video </option>
																<option class="op-level-2">Cameras </option>
																<option class="op-level-0">Cell Phones </option>
																<option class="op-level-1">Computers </option>
																<option class="op-level-1">Televisions</option>
																<option class="op-level-0">Shipping </option>
																<option class="op-level-0">Technical Support </option>
																<option class="op-level-0">Open Quotes</option>
															</select>
													</li>
												</ul>
											</div>
										</div>
										<div class="pull-right item-count mtop-5 mright-15 ">
											<span class="text-primary font-weight-bold"><small class="label bg-yellow">2</small> Items Selected</span>
										</div>
									</div>
								<!-- /.box-header -->
								<!-- form start -->
									<div class="box-body table-responsive">
										<table class="table  table-striped table-hover" datatable dt-options="dtContactMessagesOptions" dt-column-defs="dtContactMessagesColumnDefs">
											<thead>
												<tr>
													<th class="no-sort"  name="name">
														<input type="checkbox" checkbox>
													</th>
													<th class="text-capitalize">
														Subject 
													</th>
													<th class="text-capitalize">
														Contact Name
													</th>
													<th class="text-capitalize">
														Time In Chat
													</th>
													<th class="text-capitalize">
														Wait Time
													</th>
													<th class="text-capitalize">
														Assigned To
													</th>
													<th class="text-capitalize">
														Topic
													</th>
												</tr>
											</thead>  
											<tbody>
												<tr id="row1">
													<td name="name">
														<input type="checkbox" checkbox checked>
														<button class="btn btn-xs btn-link text-default btn-expand"  ng-click="toggleRow('row1')">
															<i class="fa fa-plus-circle" ng-show="!row1"></i>
															<i class="fa fa-minus-circle ng-hide" ng-show="row1" ng-cloak></i>
														</button>
													</td>
													<td>
														I need a good small camera
													</td>
													<td>
														James Williams
													</td>
													
													<td>
														01.42
													</td>
													<td>
														00.42
													</td>
													<td>
														Jonie Hewlett
													</td>
													<td>
														Cameras
													</td>
												</tr>
												<tr id="row2">
													<td name="name">
														<input type="checkbox" checkbox checked>
														<button class="btn btn-xs btn-link text-default btn-expand"  ng-click="toggleRow('row2')">
															<i class="fa fa-plus-circle" ng-show="!row2"></i>
															<i class="fa fa-minus-circle ng-hide" ng-show="row2" ng-cloak></i>
														</button>
													</td>
													<td>
														Can't find it
													</td>
													<td>
														Julie Persuavia
													</td>
													
													<td>
														01.33
													</td>
													<td>
														01.00
													</td>
													<td>
														Robert Williams
													</td>
													<td>
														Return
													</td>
												</tr>
												<tr id="row3">
													<td name="name">
														<input type="checkbox" checkbox >
														<button class="btn btn-xs btn-link text-default btn-expand"  ng-click="toggleRow('row3')">
															<i class="fa fa-plus-circle" ng-show="!row3"></i>
															<i class="fa fa-minus-circle ng-hide" ng-show="row3" ng-cloak></i>
														</button>
													</td>
													<td>
														Best price on LG Plasma
													</td>
													<td>
														John Doe
													</td>
												
													<td>
														00.22
													</td>
													<td>
														00.10
													</td>
													<td>
														Jacob Smith
													</td>
													<td>
														Return
													</td>
												</tr>
											</tbody>
										</table>
									</div>
						  		</div> 
							</div>														
						</div>
					</div>		
				</div> 
			</section>
		</div>

		<!--expanded row content start-->
		<div id="expandedrow" style="display:none;">
			<div class="col-md-12 col-sm-12">
				<div class="box box-warning">
					<div class="box-header with-border actions">
						<h3 class="box-title">
							<i class="fa fa-fw fa-reply"></i>
							Chat Dialog
						</h3>
						<div class="pull-right  form-group">
							<button class="btn btn-xs btn-danger ng-scope hidden-xs hidden-sm" ng-class="small? 'btn-block': 'hidden-xs hidden-sm'" ng-click="endChat(chat)" ng-disabled="chat.chatEndRunning()">
								<i class="fa fa-fw fa-close" ng-hide="chat.chatEndRunning()"></i>
								<i class="fa fa-spinner fa-spin fa-fw ng-hide"></i>
								End
							</button>
							<div class="btn-group btn-xs dropdown" uib-dropdown="" is-open="status.isopen">
								<button id="single-button" type="button" class="btn btn-primary btn-xs dropdown-toggle" uib-dropdown-toggle="" ng-disabled="disabled" aria-haspopup="true" aria-expanded="false">
									<i class="fa fa-fw fa-mail-forward"></i>
									Forward <span class="caret"></span>
								</button>
								<ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="single-button">
									<li role="menuitem"><a href="#">Remove From My Queue</a></li>
									<li role="menuitem"><a href="#">Assign To Agent…</a>
										<div class="bg-info text-muted text-center">
										<i>No agents available</i>
										</div>
									</li>
								</ul>
							</div>
							<div class="btn-group  hidden-xs hidden-sm dropdown" uib-dropdown="" auto-close="outsideClick">
								<button type="button" class="btn btn-default btn-xs dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false">
								<i class="fa fa-fw fa-arrows"></i>
									Change Topic <span class="caret"></span>
								</button>
								<ul class="dropdown-menu dropdown-menu-btn-option dropdown-menu-right"  uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
									<li>
											<input type="text" class="form-control mbottom-15">
											<select class="changetopicselect form-control" multiple>
												<option class="op-level-0">e-shop -- All Topics</option>
												<option class="op-level-1">_Feedback</option>
												<option class="op-level-1">_Newsletter Subscription</option>
												<option class="op-level-1">_Spam </option>
												<option class="op-level-1">_Undeliverable </option>
												<option class="op-level-1">Account Questions </option>
												<option class="op-level-2">Orders </option>
												<option class="op-level-2">Refunds </option>
												<option class="op-level-2">Returns </option>
												<option class="op-level-2">Products</option>
												<option class="op-level-2">Audio-Video </option>
												<option class="op-level-2">Cameras </option>
												<option class="op-level-0">Cell Phones </option>
												<option class="op-level-1">Computers </option>
												<option class="op-level-1">Televisions</option>
												<option class="op-level-0">Shipping </option>
												<option class="op-level-0">Technical Support </option>
												<option class="op-level-0">Open Quotes</option>
											</select>
									</li>
								</ul>
							</div>
						</div>														  
					</div>  
					<div class="box-body">
						<div class="direct-chat-messages chat-box chat">
							<dl>
								<dt>Subject</dt>
								<dd>[ref#: 26197-26197] Need to return a camera</dd>
								<dt>Question</dt>
								<dd>Need to return a camera</dd>
							</dl>
							<div class="direct-chat-msg ng-scope left" ng-repeat="line in chat.chatData.chatLines" ng-class="{ left: !line.isAgent }">
								<div class="direct-chat-info clearfix">
									<span class="direct-chat-name ng-binding pull-left" ng-class="line.isAgent? 'pull-right': 'pull-left'">John Doe</span>
								</div>
								<div class="user-initials round no-select pull-left" ng-class="line.isAgent? 'pull-right': 'pull-left'" iservice-name-initials="line.name" style="background-color: rgb(5, 160, 90);">JD</div>
								<div class="clearfix">
									<span class="direct-chat-text ng-binding pull-left" ng-class="line.isAgent? 'pull-right': 'pull-left'" ng-bind-html="line.messageHtml"><span>Need to return a camera</span></span>
								</div>
								<span class="direct-chat-timestamp pull-left" ng-class="line.isAgent? 'pull-right': 'pull-left'" am-time-ago="line.date">11 minutes ago</span>
							</div>
							<!-- Message to the right -->
							<div class="direct-chat-msg right">
								<div class="direct-chat-info clearfix">
									<span class="direct-chat-name pull-right">Jonie Hewlett</span>
									<span class="direct-chat-timestamp pull-left">23 Jan 2:05 pm</span>
								</div>
								<!-- /.direct-chat-info -->
								<div class="user-initials round no-select pull-right" style="background-color: rgb(73, 60, 96);">JH</div>
								<!-- /.direct-chat-img -->
								<div class="direct-chat-text">
									Hello James, how may I help you ?
								</div>
								<!-- /.direct-chat-text -->
							</div>
							<!-- /.direct-chat-msg -->
						<!-- Message. Default to the left -->
							<div class="direct-chat-msg">
								<div class="direct-chat-info clearfix">
									<span class="direct-chat-name pull-left">James Williams</span>
									<span class="direct-chat-timestamp pull-right">23 Jan 2:47 pm</span>
								</div>
								<!-- /.direct-chat-info -->
								<div class="user-initials round no-select pull-left" style="background-color: rgb(61, 185, 117);">JW</div>
								<!-- /.direct-chat-img -->
								<div class="direct-chat-text">
									The camera i just received has a cracked lence and i need to return it for replacement.
								</div>
								<!-- /.direct-chat-text -->
							</div>
							<!-- /.direct-chat-msg -->
							<!-- Message to the right -->
							<div class="direct-chat-msg right">
								<div class="direct-chat-info clearfix">
									<span class="direct-chat-name pull-right">Jonie Hewlett</span>
									<span class="direct-chat-timestamp pull-left">23 Jan 2:48 pm</span>
								</div>
									<!-- /.direct-chat-info -->
								<div class="user-initials round no-select pull-right" style="background-color: rgb(73, 60, 96);">JH</div>
									<!-- /.direct-chat-img -->
								<div class="direct-chat-text">
									We will provide the pickup for same.
								</div>
								<!-- /.direct-chat-text -->
							</div>
							<!-- /.direct-chat-msg -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--expanded row content end-->	
		<!-- /.content-wrapper -->
		{% include common-footer.html %}
		<!-- Control Sidebar -->
		{% include right-panel-setting-menu.html %}
		<!-- /.control-sidebar -->
		<!-- Add the sidebar's background. This div must be placed
					immediately after the control sidebar -->
		<div class="control-sidebar-bg"></div>
  </div>
    <!-- ./wrapper -->
  {% include common-javascript.html %}
    <script type="text/ng-template" id="manageChatPopover.html">
		<div>
			This page shows all waiting and active chats, and the number of chat agents available for each topic (hover over the number next to the topic to see the list of available chat agents). Select topics to see the chats in their queues, and expand a chat to view its contents.
            <br><br>
			The Chat List is updated automatically as changes occur. There is no need to reload the page to see new chats. Expand a chat to see the real-time display of the conversation between your agent and the customer. You can take actions on the chat (end, change topic, reassign, etc.) from inside the chat details panel.
			<br><br>
			Read the <a href="https://www.iservice.info/guides/users/manage-chats.html">user guide</a> to learn more about this page.
		</div>
    </script>
    <script src="../../plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../../plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.bootstrap.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.colVis.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
	<script>
		$(document).ready(function() {
			// DataTable
			var table = $('#example1').DataTable( {
				"language" : {
				"search": "Filter"
				},
				dom: 'Blfrtip',
					"order": [],
			buttons: ['colvis' ],
			"columnDefs": [ {
				"targets"  : 'no-sort',
				"orderable": false,
			}]
		});
	
		$('.selectpicker').selectpicker('refresh');

		$.fn.extend({
			treed: function (o) {
				
				var openedClass = 'glyphicon-minus-sign';
				var closedClass = 'glyphicon-plus-sign';
				
				if (typeof o != 'undefined'){
				if (typeof o.openedClass != 'undefined'){
				openedClass = o.openedClass;
				}
				if (typeof o.closedClass != 'undefined'){
				closedClass = o.closedClass;
				}
				};
				
				//initialize each of the top levels
				var tree = $(this);
				tree.addClass("tree");
				tree.find('li').has("ul").each(function () {
					var branch = $(this); //li with children ul
					branch.prepend("<i class='indicator glyphicon " + closedClass + "'></i>");
					branch.addClass('branch');
					branch.on('click', function (e) {
						if (this == e.target) {
							var icon = $(this).children('i:first');
							icon.toggleClass(openedClass + " " + closedClass);
							$(this).children().children().toggle();
						}
					})
					branch.children().children().toggle();
				});
				//fire event from the dynamically added icon
				tree.find('.branch .indicator').each(function(){
				$(this).on('click', function () {
					$(this).closest('li').click();
				});
				});
				//fire event to open branch if the li contains an anchor instead of text
				tree.find('.branch>a').each(function () {
					$(this).on('click', function (e) {
						$(this).closest('li').click();
						e.preventDefault();
					});
				});
				//fire event to open branch if the li contains a button instead of text
				tree.find('.branch>button').each(function () {
					$(this).on('click', function (e) {
						$(this).closest('li').click();
						e.preventDefault();
					});
				});
			}
		});
		$('#tree1,#tree2').treed();	
		$('#tree1 .branch,#tree2 .branch').each(function(){
			var icon = $(this).children('i:first');
			icon.toggleClass('glyphicon-minus-sign glyphicon-plus-sign');
			$(this).children().children().toggle();
		});	
		
		$(function ()
		{
			// SLIMSCROLL FOR CHAT WIDGET
				$('#variable-box').slimScroll({
				height: '250px'
				});
				$('#stock-responses').slimScroll({
				height: '250px'
				});
				CKEDITOR.replace('editor1',
				{
					height: 300
				});
			
				//iCheck for checkbox and radio inputs
				$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
				checkboxClass: 'icheckbox_minimal-blue blue2',
				radioClass: 'iradio_minimal-blue'
				});
				$('input[type="checkbox"].icheck').iCheck({
				checkboxClass: 'icheckbox_square-blue'
				});
		});
		
	});	  
	</script>
	<script>
	angular.module('iService').controller('myCtrl', function ($scope, $log,$timeout, $compile, DTOptionsBuilder, DTColumnDefBuilder)
    {
		   
			$scope.loaderTimeout = function() {
				$scope.loader = false;			
			}
           $timeout( function(){ $scope.loaderTimeout(); }, 5000);
			$scope.dtContactMessagesOptions = DTOptionsBuilder
				.newOptions().withDisplayLength(5).withOption('language', {
				search: 'Filter Chats'
			})
				.withBootstrap();
			$scope.toggleRow = function (segmentName)
			{ 
				for(var i = 1; i<=5;i++){
					if(!$scope[segmentName]){
						removeFunction(segmentName);
						$scope['row'+i] = false;
					}	
				}
				$scope[segmentName] = !$scope[segmentName];
				if($scope[segmentName]){
					myCreateFunction(segmentName);
				}else{
					removeFunction(segmentName);
				}

				$scope.items = [{
					'name': 'Item 1'
					}, {
					'name': 'Item 2'
					}, {
					'name': 'Account 3'
					}, {
					'name': 'Account 4'
					}, {
					'name': 'Item 5'
					}, {
					'name': 'Item 6'
					}, {
					'name': 'User 7'
					}, {
					'name': 'User 8'
					}];
			};

			function myCreateFunction(row) {
				var innerHTML = document.getElementById('expandedrow').innerHTML;
				angular.element('#'+row).after($compile('<tr class="expandedrowcontent"><td>&nbsp;</td><td colspan="6">'+document.getElementById('expandedrow').innerHTML+'</td></tr>')($scope));
			}

			function removeFunction(row){
				angular.element('.expandedrowcontent').remove();
			}

			$scope.show = function(action) {
				$scope.hidetrue = true;
				$scope[action] = !$scope[action];
			};

			$scope.cancel = function(action) {
				$scope.hidetrue = false;
				$scope[action] = !$scope[action];
			};	

			
          
			
			$scope.toggleDropdown = function($event) {
				$event.preventDefault();
				$event.stopPropagation();
				$scope.status.isopen = !$scope.status.isopen;
			};

			$scope.appendToEl = angular.element(document.querySelector('#dropdown-long-content'));
            
			$scope.customForm = function(){
				$scope.customform = true;
			}
			$scope.builtinForm = function(){
				$scope.customform = false;
			}
			$scope.showIncomingList = function(){
				$scope.incomingList = true;
				removeFunction('');
			}
			$scope.showPraposedList = function(){
				$scope.incomingList = false;
				removeFunction('');
			}
		});	 

		angular.module('iService').controller('AgentCtrl', function ($scope, $http, $timeout, $interval) {
			var vm = this;
			vm.agent = {};
			vm.agentselected = {selected : "Select or search for an agent in the list"};
			vm.agentname = [ 
				{name: 'Alek Packard' , email:'alek.packard@example.com', code: 'AP'},
				{name: 'Jacob Smith', email:'jacob.smith@example.com', code: 'JS'},
				{name: 'Jonie Hewlett', email:'jonie.hewlett@example.com', code: 'JH'},
				{name: 'Justin Time', email:'justin.time@example.com', code: 'JT'},
			];
		});

		angular.module('iService').controller('extAgentCtrl', function ($scope, $http, $timeout, $interval) {
			var vm = this;
			vm.agent = {};
			vm.agentselected = {selected : "Select or search for a notification template"};
			vm.agentname = [ 
				{name: 'Template 1'},
				{name: 'Template 2'},
		    ];
		});
		app.filter('propsFilter', function() {
			return function(items, props) {
				var out = [];

				if (angular.isArray(items)) {
				var keys = Object.keys(props);

				items.forEach(function(item) {
					var itemMatches = false;

					for (var i = 0; i < keys.length; i++) {
					var prop = keys[i];
					var text = props[prop].toLowerCase();
					if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {
						itemMatches = true;
						break;
					}
					}

					if (itemMatches) {
					out.push(item);
					}
				});
				} else {
				// Let the output be the input untouched
				out = items;
				}

				return out;
			};
		});

		app.controller('DemoCtrl', function ($scope, $http, $timeout, $interval) {
			var vm = this;
			vm.segmentObj = {
				'1' : { name: '-Default Mail Box-', segmentname: 'QA' },
				'2' : { name: 'Push Bullet', segmentname: 'QA' },
				'3' : { name: '-Default Mail Box-', segmentname: 'QA2- Second Segment' },
				'4' : { name: 'Push Bullet', segmentname: 'QA2- Second Segment' },
			};
      vm.segmentselected = {selected : "Push Bullet"};
			vm.segment = [
				{ name: '-Default Mail Box-', segmentname: 'QA' },
				{ name: 'Push Bullet', segmentname: 'QA' },
				{ name: '-Default Mail Box-', segmentname: 'QA2- Second Segment' },
				{ name: 'Push Bullet',  segmentname: 'QA2- Second Segment' },
			];
		});
		angular.module('iService').controller('agentEmailCtrl', function ($scope, $http, $timeout, $interval) {
			var vm = this;
			vm.agent = {};
			vm.agentselected = {selected : "Alek Packard"};
			vm.agentname = [ 
				{name: 'Alek Packard', code: 'AP'},
				{name: 'Jacob Smith', code: 'JS'},
				{name: 'Jonie Hewlett', code: 'JH'},
				{name: 'Justin Time', code: 'JT'},
			];
		});
		angular.module('iService').controller('FromEmail', function ($scope, $http, $timeout, $interval) {
			var vm = this;
			vm.agent = {};
			vm.agentselected = {selected : "--Default MailBox--"};
			vm.agentname = [ 
				{name: '--Default MailBox--', code: ''},
				{name: 'Customer Support (support@example.com)', code: ''},
				{name: 'Sales (Sales@example.com)', code: ''},
				{name: 'Technical Support (technicalsupport@example.com)', code: ''},
			];
		});

		
	</script>
</body>
</html>
